frr version 10.1.1_git
frr defaults traditional
hostname RR4S
service integrated-vtysh-config
!
ipv6 forward
!
debug bgp updates
!
debug bgp zebra
!
router isis RR4S
    net 49.0001.0000.0000.0005.00
    is-type level-1
exit
!
router bgp 65000
    bgp router-id 2.0.0.4
    bgp cluster-id 2.0.0.4
    bgp default ipv6-unicast
    no bgp network import-check
    no bgp ebgp-requires-policy
    neighbor TOP_LEVEL peer-group
    neighbor TOP_LEVEL remote-as 65000
    ! neighbor TOP_LEVEL update-source loopback
    ! neighbor TOP_LEVEL route-map ACCEPT_ALL in
    ! neighbor TOP_LEVEL route-map ACCEPT_ALL out
    neighbor TOP_LEVEL next-hop-self
    neighbor eth-rr1t interface peer-group TOP_LEVEL
    neighbor eth-rr2t interface peer-group TOP_LEVEL
    ! external peer
    neighbor EXTERNAL peer-group
    ! neighbor EXTERNAL remote-as 65010
    ! neighbor EXTERNAL update-source loopback
    ! neighbor EXTERNAL route-map ACCEPT_ALL in
    ! neighbor EXTERNAL route-map ACCEPT_ALL out
    neighbor eth-e1 interface peer-group EXTERNAL
    neighbor eth-e1 remote-as 65010
    address-family ipv6 unicast
        network fc00:2142:6::/32
        neighbor EXTERNAL activate
        neighbor EXTERNAL prefix-list receive_from_65010 in
        neighbor EXTERNAL prefix-list send_to_65010 out
        neighbor EXTERNAL route-map IPv6_Set-Nexthop_65010 out
        neighbor TOP_LEVEL activate
        neighbor TOP_LEVEL prefix-list receive_from_65000 in
        neighbor TOP_LEVEL prefix-list send_to_65000 out
        neighbor TOP_LEVEL route-map Tag_Internal in
    exit-address-family
exit
!
ipv6 prefix-list receive_from_65000 seq 100 permit any
ipv6 prefix-list send_to_65000 seq 100 permit any
ipv6 prefix-list receive_from_65010 seq 100 permit any
ipv6 prefix-list send_to_65010 seq 100 permit any
!
route-map ACCEPT_ALL permit 10
    match ipv6 address all
    set local-preference 10
!
route-map Tag_Internal permit 20
 match ipv6 address all
 set local-preference 100
 set tag 65010
!
route-map IPv6_Set-Nexthop_65010 permit 20
 match ipv6 address all
 set ipv6 next-hop peer-address
!
interface loopback
    ipv6 address fc00:2142::5/128 
    ipv6 router isis RR4S
    isis circuit-type level-1
    isis network point-to-point
exit
!
interface eth-rr1t
    ipv6 address fc00:2142:6:1::61/64
    ipv6 router isis RR4S
    isis circuit-type level-1
    isis network point-to-point 
exit
!
interface eth-rr2t
    ipv6 address fc00:2142:6:2::62/64
    ipv6 router isis RR4S
    isis circuit-type level-1
    isis network point-to-point     
exit
!
interface eth-e1
    ipv6 address fc00:2142:a::1/64
exit
